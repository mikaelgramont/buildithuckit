<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module name="bihi-design-step">
  <style>
    .title {
      display: block;
      width: 100%;
      text-align: left;
      border: 0;
      padding: 5px 15px;
      margin: 0;
      font-family: helvetica, arial;
      font-size: 24px;
      color: #d7d7d7;
      background: #808080;
    }
    .title:hover {
      cursor: pointer;
    }
    .body {
      margin: 0 15px;
      display: none;
      flex-direction: column;
      flex-grow: 1;
    }
    .body-content {
      flex-grow: 1;
    }
    .button-section {
      display: flex;
      margin: 15px 0;
      justify-content: space-between;
    }
  </style>

  <template>
    <button role="tab" class="title" on-click="onTitleClick">
      <span>{{step}}</span> - <span>{{caption}}</span>
    </button>
    <div class="body">
      <div role="tabpanel" class="body-content">
        <content></content>
      </div>
      <div class="button-section">
          <button on-click="onBackClick">Back</button>
          <button on-click="onNextClick">Next</button>
      </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: "bihi-design-step",
      listeners: {
        "step-select": "onSelect",
        "step-unselect": "onUnselect"
      },
      onBackClick: function() {
        if (this.first) {
          return;
        }        
        this.fire('step-back-click', {step: this.step});
      },
      onNextClick: function() {
        if (this.last) {
          return;
        }        
        this.fire('step-next-click', {step: this.step});
      },
      onSelect: function() {
        this.active = true;
      },
      onTitleClick: function() {
        // Dispatch an event to the parent to tell it this step
        // should get focus.
        this.fire('step-title-click', {step: this.step});
      },
      onUnselect: function() {
        this.active = false;
      },
      properties: {
        active: {type: Boolean, reflectToAttribute: true},
        first: {type: Boolean},
        caption: {type: String},
        last: {type: Boolean},
        step: {type: Number}
      },
    });
  </script>
</dom-module>