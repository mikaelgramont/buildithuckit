<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="bihi-toolbarbuttons">
	<style>
		button:first-child {
			margin-right: 5px;
		}
	</style>
	<template>
		<button id="duplicate" on-click="doDuplicate" class="small">Duplicate</button>
		<button on-click="doReset" class="small">Reset</button>	
	</template>
</dom-module>

<script>
Polymer({
    is: "bihi-toolbarbuttons",
    listeners: {
    	"update": "onUpdate"
    },
    onUpdate: function(e) {
    	this.$.duplicate.classList.toggle('hidden',
    		[EditorState.READ_ONLY, EditorState.SAVED].indexOf(e.detail.state) === -1);
    },
    doReset: function() {
    	this.fire("requested-state-change", {state: EditorState.NEW}, document.body, false);
        setTimeout(function() {
            // Once we've reset everything, move to the ready state.
            this.fire("requested-state-change", {state: EditorState.READY}, document.body, false);
        }.bind(this), 0);
    },
    doDuplicate: function() {
    	this.fire("requested-state-change", {state: EditorState.READY}, document.body, false);
    }
});	
</script>
